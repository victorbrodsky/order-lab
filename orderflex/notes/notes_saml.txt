https://github.com/nbgrp/onelogin-saml-bundle
https://github.com/SAML-Toolkits/php-saml
https://medium.com/@cyrilgeorgespereira/multiple-sso-with-symfony-and-onelogin-saml-bundle-5e1d44838f1a

composer require nbgrp/onelogin-saml-bundle

Andrew Thompson
10/9/2024 3:10 PM
Okay, I notice you are also including NYP users, but the nameID is EPPN.
If NYP does not support that attribute, I recommend using the primary email for the nameID.
Let me know if you need further clarification.
Also configure this metadata on your end:
https://login-proxy-test.weill.cornell.edu/idp/saml2/idp/metadata.php

<md:EntityDescriptor entityID="https://login-proxy-test.weill.cornell.edu/idp">
<md:IDPSSODescriptor protocolSupportEnumeration="urn:oasis:names:tc:SAML:2.0:protocol">
<md:Extensions>
<shibmd:Scope regexp="false">med.cornell.edu</shibmd:Scope>
</md:Extensions>
<md:KeyDescriptor use="signing">
<ds:KeyInfo>
<ds:X509Data>
<ds:X509Certificate>
MIIEnTCCA4WgAwIBAgIJAIGDRCdfrTpwMA0GCSqGSIb3DQEBCwUAMIHkMQswCQYDVQQGEwJVUzERMA8GA1UECAwITmV3IFlvcmsxETAPBgNVBAcMCE5ldyBZb3JrMSYwJAYDVQQKDB1XZWlsbCBDb3JuZWxsIE1lZGljYWwgQ29sbGVnZTEtMCsGA1UECwwkSVRTIC0gU2VjdXJpdHkgJiBJZGVudGl0eSBNYW5hZ2VtZW50MSswKQYDVQQDDCJsb2dpbi1wcm94eS10ZXN0LndlaWxsLmNvcm5lbGwuZWR1MSswKQYJKoZIhvcNAQkBFhxpdHMtc2VjdXJpdHlAbWVkLmNvcm5lbGwuZWR1MB4XDTE2MDgxOTE0MDI1OVoXDTI2MDgxOTE0MDI1OVowgeQxCzAJBgNVBAYTAlVTMREwDwYDVQQIDAhOZXcgWW9yazERMA8GA1UEBwwITmV3IFlvcmsxJjAkBgNVBAoMHVdlaWxsIENvcm5lbGwgTWVkaWNhbCBDb2xsZWdlMS0wKwYDVQQLDCRJVFMgLSBTZWN1cml0eSAmIElkZW50aXR5IE1hbmFnZW1lbnQxKzApBgNVBAMMImxvZ2luLXByb3h5LXRlc3Qud2VpbGwuY29ybmVsbC5lZHUxKzApBgkqhkiG9w0BCQEWHGl0cy1zZWN1cml0eUBtZWQuY29ybmVsbC5lZHUwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQD38io3LXbfscpGt2pIa5aMUvUDQRBWUgbcY+jI/rmDEKyW5FqjA+T2cGFKxUgrgmloreG373V5UND+3jLnHnghevhG5XNRAXBnpZiYbT5HCq4bkknhsCwLzsfYaZEeGraK25u88lo5X2aJcBZ6TjGeeDgEkvL/Cdvux9TkpIRm2lxy29moafU3+4J6o8IPeLA8sq9tMspUMYDYg4hA6JcHqPkvW6af0UCmmW0qoybqrj9gH2LZkUinC5wTpggoa8XpP6tiYA79kSLFM8xAaO2idOPhr0/cByaja9Ueaf5NMCl5dWPYM6lpfFKR86n65o1wg1xWtH36E9zNA4/Rl6E/AgMBAAGjUDBOMB0GA1UdDgQWBBT5oNV5meTkMzgJLRnfkvZEgl9F6DAfBgNVHSMEGDAWgBT5oNV5meTkMzgJLRnfkvZEgl9F6DAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBCwUAA4IBAQDx/l9O7rkgbZp0FjfCY7OsNpD1VoLh9q6BJN+qLE/vvmwvnm4iFkP+WxAANhmhBBfks264j3BzD44To0o3ukP77UIlX7cdGXTQlfjIKudqUUWDzwp6HPCIeow1nwOIXkoTk+nrBQVxeVeZUqb0MK8V5GvjyR1zr6/5Qi8mmX+zv7miWZ+nc/MZywsX0FNIB5C/Gu8ZPFw0UpE2GSs0ClAFeGklB14kHLW3VPPcZ1wTg3PLiA58Dr5adEB82LbRZNn1jb1euEWNUvC549FIXL5HB+11NI+gw4H8P0auuz5IVkoy5JGYWL0aE2H+g2jPl1ib5Nsz4nFbhew3HV4p7+AD
</ds:X509Certificate>
</ds:X509Data>
</ds:KeyInfo>
</md:KeyDescriptor>
<md:KeyDescriptor use="encryption">
<ds:KeyInfo>
<ds:X509Data>
<ds:X509Certificate>
MIIEnTCCA4WgAwIBAgIJAIGDRCdfrTpwMA0GCSqGSIb3DQEBCwUAMIHkMQswCQYDVQQGEwJVUzERMA8GA1UECAwITmV3IFlvcmsxETAPBgNVBAcMCE5ldyBZb3JrMSYwJAYDVQQKDB1XZWlsbCBDb3JuZWxsIE1lZGljYWwgQ29sbGVnZTEtMCsGA1UECwwkSVRTIC0gU2VjdXJpdHkgJiBJZGVudGl0eSBNYW5hZ2VtZW50MSswKQYDVQQDDCJsb2dpbi1wcm94eS10ZXN0LndlaWxsLmNvcm5lbGwuZWR1MSswKQYJKoZIhvcNAQkBFhxpdHMtc2VjdXJpdHlAbWVkLmNvcm5lbGwuZWR1MB4XDTE2MDgxOTE0MDI1OVoXDTI2MDgxOTE0MDI1OVowgeQxCzAJBgNVBAYTAlVTMREwDwYDVQQIDAhOZXcgWW9yazERMA8GA1UEBwwITmV3IFlvcmsxJjAkBgNVBAoMHVdlaWxsIENvcm5lbGwgTWVkaWNhbCBDb2xsZWdlMS0wKwYDVQQLDCRJVFMgLSBTZWN1cml0eSAmIElkZW50aXR5IE1hbmFnZW1lbnQxKzApBgNVBAMMImxvZ2luLXByb3h5LXRlc3Qud2VpbGwuY29ybmVsbC5lZHUxKzApBgkqhkiG9w0BCQEWHGl0cy1zZWN1cml0eUBtZWQuY29ybmVsbC5lZHUwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQD38io3LXbfscpGt2pIa5aMUvUDQRBWUgbcY+jI/rmDEKyW5FqjA+T2cGFKxUgrgmloreG373V5UND+3jLnHnghevhG5XNRAXBnpZiYbT5HCq4bkknhsCwLzsfYaZEeGraK25u88lo5X2aJcBZ6TjGeeDgEkvL/Cdvux9TkpIRm2lxy29moafU3+4J6o8IPeLA8sq9tMspUMYDYg4hA6JcHqPkvW6af0UCmmW0qoybqrj9gH2LZkUinC5wTpggoa8XpP6tiYA79kSLFM8xAaO2idOPhr0/cByaja9Ueaf5NMCl5dWPYM6lpfFKR86n65o1wg1xWtH36E9zNA4/Rl6E/AgMBAAGjUDBOMB0GA1UdDgQWBBT5oNV5meTkMzgJLRnfkvZEgl9F6DAfBgNVHSMEGDAWgBT5oNV5meTkMzgJLRnfkvZEgl9F6DAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBCwUAA4IBAQDx/l9O7rkgbZp0FjfCY7OsNpD1VoLh9q6BJN+qLE/vvmwvnm4iFkP+WxAANhmhBBfks264j3BzD44To0o3ukP77UIlX7cdGXTQlfjIKudqUUWDzwp6HPCIeow1nwOIXkoTk+nrBQVxeVeZUqb0MK8V5GvjyR1zr6/5Qi8mmX+zv7miWZ+nc/MZywsX0FNIB5C/Gu8ZPFw0UpE2GSs0ClAFeGklB14kHLW3VPPcZ1wTg3PLiA58Dr5adEB82LbRZNn1jb1euEWNUvC549FIXL5HB+11NI+gw4H8P0auuz5IVkoy5JGYWL0aE2H+g2jPl1ib5Nsz4nFbhew3HV4p7+AD
</ds:X509Certificate>
</ds:X509Data>
</ds:KeyInfo>
</md:KeyDescriptor>
<md:SingleLogoutService Binding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect" Location="https://login-proxy-test.weill.cornell.edu/idp/profile/SAML2/Redirect/SLO"/>
<md:NameIDFormat>
urn:oasis:names:tc:SAML:2.0:nameid-format:transient
</md:NameIDFormat>
<md:SingleSignOnService Binding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect" Location="https://login-proxy-test.weill.cornell.edu/idp/profile/SAML2/Redirect/SSO"/>
</md:IDPSSODescriptor>
<md:ContactPerson contactType="technical">
<md:GivenName>ITS Identity Management</md:GivenName>
<md:EmailAddress>mailto:idm@med.cornell.edu</md:EmailAddress>
</md:ContactPerson>
</md:EntityDescriptor>


TODO:
https://medium.com/@cyrilgeorgespereira/multiple-sso-with-symfony-and-onelogin-saml-bundle-5e1d44838f1a
Load a configuration dynamically


<ds:X509Certificate>
MIIEnTCCA4WgAwIBAgIJAIGDRCdfrTpwMA0GCSqGSIb3DQEBCwUAMIHkMQswCQYDVQQGEwJVUzERMA8GA1UECAwITmV3IFlvcmsxETAPBgNVBAcMCE5ldyBZb3JrMSYwJAYDVQQKDB1XZWlsbCBDb3JuZWxsIE1lZGljYWwgQ29sbGVnZTEtMCsGA1UECwwkSVRTIC0gU2VjdXJpdHkgJiBJZGVudGl0eSBNYW5hZ2VtZW50MSswKQYDVQQDDCJsb2dpbi1wcm94eS10ZXN0LndlaWxsLmNvcm5lbGwuZWR1MSswKQYJKoZIhvcNAQkBFhxpdHMtc2VjdXJpdHlAbWVkLmNvcm5lbGwuZWR1MB4XDTE2MDgxOTE0MDI1OVoXDTI2MDgxOTE0MDI1OVowgeQxCzAJBgNVBAYTAlVTMREwDwYDVQQIDAhOZXcgWW9yazERMA8GA1UEBwwITmV3IFlvcmsxJjAkBgNVBAoMHVdlaWxsIENvcm5lbGwgTWVkaWNhbCBDb2xsZWdlMS0wKwYDVQQLDCRJVFMgLSBTZWN1cml0eSAmIElkZW50aXR5IE1hbmFnZW1lbnQxKzApBgNVBAMMImxvZ2luLXByb3h5LXRlc3Qud2VpbGwuY29ybmVsbC5lZHUxKzApBgkqhkiG9w0BCQEWHGl0cy1zZWN1cml0eUBtZWQuY29ybmVsbC5lZHUwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQD38io3LXbfscpGt2pIa5aMUvUDQRBWUgbcY+jI/rmDEKyW5FqjA+T2cGFKxUgrgmloreG373V5UND+3jLnHnghevhG5XNRAXBnpZiYbT5HCq4bkknhsCwLzsfYaZEeGraK25u88lo5X2aJcBZ6TjGeeDgEkvL/Cdvux9TkpIRm2lxy29moafU3+4J6o8IPeLA8sq9tMspUMYDYg4hA6JcHqPkvW6af0UCmmW0qoybqrj9gH2LZkUinC5wTpggoa8XpP6tiYA79kSLFM8xAaO2idOPhr0/cByaja9Ueaf5NMCl5dWPYM6lpfFKR86n65o1wg1xWtH36E9zNA4/Rl6E/AgMBAAGjUDBOMB0GA1UdDgQWBBT5oNV5meTkMzgJLRnfkvZEgl9F6DAfBgNVHSMEGDAWgBT5oNV5meTkMzgJLRnfkvZEgl9F6DAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBCwUAA4IBAQDx/l9O7rkgbZp0FjfCY7OsNpD1VoLh9q6BJN+qLE/vvmwvnm4iFkP+WxAANhmhBBfks264j3BzD44To0o3ukP77UIlX7cdGXTQlfjIKudqUUWDzwp6HPCIeow1nwOIXkoTk+nrBQVxeVeZUqb0MK8V5GvjyR1zr6/5Qi8mmX+zv7miWZ+nc/MZywsX0FNIB5C/Gu8ZPFw0UpE2GSs0ClAFeGklB14kHLW3VPPcZ1wTg3PLiA58Dr5adEB82LbRZNn1jb1euEWNUvC549FIXL5HB+11NI+gw4H8P0auuz5IVkoy5JGYWL0aE2H+g2jPl1ib5Nsz4nFbhew3HV4p7+AD
</ds:X509Certificate>


