{% extends "AppDashboardBundle/Default/base.html.twig" %}

{% import "AppOrderformBundle/Default/formmacros.html.twig" as formmacros %}

{% block title %}
    {{ title }}
{% endblock %}

{% block content %}

    {% if cycle is not defined %}
        {% set cycle = "show" %}
    {% endif %}

    <input type="hidden" id="formcycle" value="{{ cycle }}" />
    <input type="hidden" id="useWarning" value="{{ useWarning }}" />

    {% if testflag is defined %}
        <input type="hidden" id="testflag" value="{{ testflag }}" />
    {% endif %}


    <h4 class="text-info" align="center">
        {{ title|raw }}
    </h4>
    {#<br>#}

    <div class="form-search">
        {{ form_start(filterform) }}

        {% set simpleFilter = false %}
        {#{% set simpleFilter = true %}#}

        {% if simpleFilter %}
            <div class="row">
                <div class="col-xs-2" data-toggle="tooltip" title="Start Date">
                    {{ formmacros.fielddate(filterform.startDate,'allow-future-date') }}
                </div>
                <div class="col-xs-2" data-toggle="tooltip" title="End Date">
                    {{ formmacros.fielddate(filterform.endDate,'allow-future-date') }}
                </div>
                <div class="col-xs-2" data-toggle="tooltip" title="Specialty">
                    {% if filterform.projectSpecialty is defined %}
                        {{ form_widget(filterform.projectSpecialty, {'attr': {'placeholder': 'Specialty'}}) }}
                    {% endif %}
                </div>
                {#<div class="col-xs-2">#}
                    {#{% if filterform.compareType is defined %}#}
                        {#{{ form_widget(filterform.compareType, {'attr': {'placeholder': 'Compare Type'}}) }}#}
                    {#{% endif %}#}
                {#</div>#}
                <div class="col-xs-5" data-toggle="tooltip" title="Chart">
                    {% if filterform.chartType is defined %}
                        {{ form_widget(filterform.chartType, {'attr': {'placeholder': 'Chart'}}) }}
                    {% endif %}
                </div>
                {#<div class="col-xs-1">#}
                    {#{% if filterform.showLimited is defined %}#}
                        {#{{ formmacros.checkbox(filterform.showLimited) }}#}
                        {#{{ form_label(filterform.showLimited) }}&nbsp;{{ form_widget(filterform.showLimited) }}#}
                    {#{% endif %}#}
                {#</div>#}
                <div class="col-xs-1">
                    <button id="filter-btn" type="button" class="btn btn-default" onclick="plotlyGetChartsReact('dashboard')" data-spinner-color="{{ spinnerColor }}">Filter</button>
                </div>
            </div>

            <br>
            <div class="row">

                <div class="col-xs-1" data-toggle="tooltip" title="Hide remaining total">
                    {% if filterform.showLimited is defined %}
                        {#{{ form_label(filterform.showLimited) }}&nbsp;{{ form_widget(filterform.showLimited) }}#}
                        {#{{ form_row(filterform.showLimited) }}#}
                        {{ form_widget(filterform.showLimited) }}
                    {% endif %}
                </div>
                <div class="col-xs-1" data-toggle="tooltip" title="Quantity limit">
                    {% if filterform.quantityLimit is defined %}
                        {#{{ form_label(filterform.quantityLimit) }}&nbsp;{{ form_widget(filterform.quantityLimit) }}#}
                        {#{{ form_row(filterform.quantityLimit) }}#}
                        {{ form_widget(filterform.quantityLimit) }}
                    {% endif %}
                </div>

                <div class="col-xs-10" data-toggle="tooltip" title="Products/Services">
                    {% if filterform.category is defined %}
                        {{ form_widget(filterform.category) }}
                        {#{{ form_row(filterform.category) }}#}
                    {% endif %}
                </div>
            </div>
        {% else %}

            <div class="row">
                <div class="col-xs-11" data-toggle="tooltip" title="Chart">
                    {{ form_widget(filterform.chartType, {'attr': {'placeholder': 'Chart'}}) }}
                </div>
                <div class="col-xs-1">
                    <button id="filter-btn"
                            type="button"
                            class="btn btn-default"
                            onclick="plotlyGetChartsReact('dashboard')"
                            data-spinner-color="{{ spinnerColor }}"
                    >Display</button>
                    <button id="clear-btn"
                            type="button"
                            class="btn btn-default"
                            onclick="dashboardClearAllCharts()"
                    >Clear</button>
                </div>
            </div>

            <div id="hidden-filter" class="row" style="margin-top: 10px; display: none;">
                <div class="col-xs-2" data-toggle="tooltip" title="Start Date">
                    {{ formmacros.fielddate(filterform.startDate,'allow-future-date') }}
                </div>
                <div class="col-xs-2" data-toggle="tooltip" title="End Date">
                    {{ formmacros.fielddate(filterform.endDate,'allow-future-date') }}
                </div>
                <div class="col-xs-2" data-toggle="tooltip" title="Specialty">
                    {% if filterform.projectSpecialty is defined %}
                        {{ form_widget(filterform.projectSpecialty, {'attr': {'placeholder': 'Specialty'}}) }}
                    {% endif %}
                </div>
                <div class="col-xs-1" data-toggle="tooltip" title="Hide remaining total">
                    {% if filterform.showLimited is defined %}
                        {#{{ form_label(filterform.showLimited) }}&nbsp;{{ form_widget(filterform.showLimited) }}#}
                        {#{{ form_row(filterform.showLimited) }}#}
                        {{ form_widget(filterform.showLimited) }}
                    {% endif %}
                </div>
                <div class="col-xs-1" data-toggle="tooltip" title="Quantity limit">
                    {% if filterform.quantityLimit is defined %}
                        {#{{ form_label(filterform.quantityLimit) }}&nbsp;{{ form_widget(filterform.quantityLimit) }}#}
                        {#{{ form_row(filterform.quantityLimit) }}#}
                        {{ form_widget(filterform.quantityLimit) }}
                    {% endif %}
                </div>
                <div class="col-xs-4" data-toggle="tooltip" title="Products/Services">
                    {% if filterform.category is defined %}
                        {{ form_widget(filterform.category) }}
                        {#{{ form_row(filterform.category) }}#}
                    {% endif %}
                </div>
            </div>

        {% endif %}

        {{ form_end(filterform) }}
    </div>




    {#<div class="chart"></div>#}

    {#<div id="start-test" align="center">#}
        {#start-test#}
    {#</div>#}
    {#<br>#}

    <div id="root"></div>

    <div id="error-message"></div>

    <div id="charts" align="center">
        <!-- Plotly chart will be drawn inside this DIV -->
    </div>

{% endblock %}


{% block stylesheets %}
    {#{{ parent() }}#}
    {{ encore_entry_link_tags('dashboard') }}
{% endblock %}
{% block javascripts %}
    {#{{ parent() }}#}
    {{ encore_entry_script_tags('dashboard') }}
{% endblock %}

{% block additionaljs %}
    <script src="{{ asset('orderassets/AppUserdirectoryBundle/charts/plotly/plotly.min.js') }}"></script>
    <script src="{{ asset('orderassets/AppUserdirectoryBundle/form/js/user-choices-plotly.js') }}"></script>
{% endblock %}

{% block mainjs %}

    <script src="{{ asset('orderassets/AppUserdirectoryBundle/jquery/jquery-1.11.0.min.js') }}"></script>
    {#<script src="{{ asset('orderassets/AppUserdirectoryBundle/jquery/jquery-3.6.0.min.js') }}"></script>#}
    <script src="{{ asset('orderassets/AppUserdirectoryBundle/bootstrap/js/bootstrap.min.js') }}"></script>
    <script src="{{ asset('orderassets/AppUserdirectoryBundle/ladda/spin.min.js') }}"></script>
    <script src="{{ asset('orderassets/AppUserdirectoryBundle/ladda/ladda.min.js') }}"></script>
    <script src="{{ asset('orderassets/AppUserdirectoryBundle/datepicker/js/bootstrap-datepicker.min.js') }}"></script>
    <script src="{{ asset('orderassets/AppUserdirectoryBundle/select2/select2.js') }}"></script>
    <script src="{{ asset('orderassets/AppUserdirectoryBundle/inputmask/jquery.inputmask.bundle.min.js') }}"></script>
    <script src="{{ asset('orderassets/AppUserdirectoryBundle/jasny/js/rowlink.js') }}"></script>
    <script src="{{ asset('orderassets/AppUserdirectoryBundle/q-1/q.js') }}"></script>
    <script src="{{ asset('orderassets/AppUserdirectoryBundle/pnotify/pnotify.custom.min.js') }}"></script>

    <script src="{{ asset('orderassets/AppUserdirectoryBundle/dropzone/dropzone.min.js') }}"></script>
    <script src="{{ asset('orderassets/AppUserdirectoryBundle/form/js/user-fileuploads.js') }}"></script>
    <script src="{{ asset('orderassets/AppUserdirectoryBundle/form/js/user-navbar.js') }}"></script>

    <script src="{{ asset('orderassets/AppUserdirectoryBundle/form/js/user-common.js') }}"></script>
    <script src="{{ asset('orderassets/AppUserdirectoryBundle/form/js/user-form.js') }}"></script>

    {#<script src="{{ asset('orderassets/AppUserdirectoryBundle/idletimeout/jquery.idletimeout.js') }}"></script>#}
    {#<script src="{{ asset('orderassets/AppUserdirectoryBundle/idletimeout/jquery.idletimer.js') }}"></script>#}
    {#<script src="{{ asset('orderassets/AppUserdirectoryBundle/form/js/user-idleTimeout.js') }}"></script>#}

    <script src="{{ asset('orderassets/AppUserdirectoryBundle/form/js/user-selectAjax.js') }}"></script>
    <script src="{{ asset('orderassets/AppUserdirectoryBundle/form/js/user-treeSelectAjax.js') }}"></script>
    <script src="{{ asset('orderassets/AppUserdirectoryBundle/vakata-jstree/jstree.min.js') }}"></script>
    <script src="{{ asset('orderassets/AppUserdirectoryBundle/form/js/user-jstree.js') }}"></script>

    <script src="{{ asset('orderassets/AppUserdirectoryBundle/form/js/user-formnode.js') }}"></script>
    <script src="{{ asset('orderassets/AppUserdirectoryBundle/form/js/user-formReady.js') }}"></script>
    <script src="{{ asset('orderassets/AppUserdirectoryBundle/form/js/user-masking.js') }}"></script>
    <script src="{{ asset('orderassets/AppUserdirectoryBundle/form/js/user-basetitles.js') }}"></script>

    <script src="{{ asset('orderassets/AppOrderformBundle/form/js/modal.js') }}"></script>
    <script src="{{ asset('orderassets/AppOrderformBundle/form/js/tooltips.js') }}"></script>

    <script src="{{ asset('orderassets/AppUserdirectoryBundle/typeahead/typeahead.bundle.min.js') }}"></script>
    <script src="{{ asset('orderassets/AppUserdirectoryBundle/form/js/user-typeahead.js') }}"></script>


    <script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
    <script src="{{ path('fos_js_routing_js', {'callback': 'fos.Router.setData'}) }}"></script>

{% endblock %}
